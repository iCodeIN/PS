package Joshua.PS.BOJ;

import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.HashMap;
import java.util.StringTokenizer;

public class Main {
    public static void main(String[] args) throws IOException {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));

        int[][] board = { {11, 13, 15, 16}, {12, 1, 4, 3 }, {10, 2, 7, 8}, {5, 14, 6, 9} };

        int[][] board2 = {{6,15,17,14,23},{5,12,16,13,25},{21,4,2,1,22},{10,20,3,18,8},{11,9,19,24,7}};

        int[] nums = {14,3,2,4,13,1,16,11,5,15};

        int[] nums2 = {15,7,2,25,9,16,12,18,5,4,10,13,20};

        int[] nums3 = {242,129,170,213,168,107,45,79,220,226,221,188,131,248,20,243,232,97,31,238,98,206,26,105,214,141,227,151,88,142,112,207,35,117,134,114,60,123,239,21,121,7,28,90,113,43,16,122,180,71,164,11,152,68,115,80,33,155,218,182,228,116,104,72,161,194,125,111,93,233,50,75,172,205,138,110,84,55,149,29,217,159,44,209,9,153,54,76,187,62,61,178,167,173,166,57,247,59,237,225,106,204,67,147,143,150,176,3,89,10,192,66,235,216,201,83,23,101,69,51,249,135,48,231,64,27,144,156,244,120,119,230,179,203,132,229,145,40,212,185,100,74,19,163,108,174,92,126,171,103,15,24,94,56,183,124,63,241,12,39,198,127,53,177,49,223,58,196,136,37,157,52,245,81,30,91,25,34,162,5,139,246,181,99,86,73,65,77,130,236,211,175,18,158,222,38,1,137,42,96,95,189,224,210,4,2,78,191,148,200,41,82,190,186,197,219,199,13,22,70,193,118,17,128,32,250,202,140,6,8,36,87,47,14,184,46,109,169,195,234,85,160,154,215,208,102,240,146,165,133};

        int[] nums4 = {975,993,776,750,1054,890,1368,2434,632,493,1280,1460,384,568,1743,773,1410,1678,1092,956,1959,1001,2198,635,659,1485,1388,2393,1159,2355,2012,939,2442,554,2306,717,2369,2111,1377,1380,292,1716,1173,1201,1162,2222,1247,1432,2150,1503,690,2017,1314,1163,1811,196,2425,824,124,2499,23,352,1431,312,992,152,178,2046,1664,2412,1509,1364,1409,1252,1737,264,1807,1106,1310,1624,1281,187,788,942,1190,1746,858,1863,1358,2323,1589,1692,232,1552,2067,859,812,1683,767,1749,92,1785,1301,102,1771,1596,2100,190,1115,1166,841,1767,958,724,266,487,2364,2065,806,15,658,119,1695,1985,1731,835,1709,2320,1963,573,505,726,1148,2299,1325,164,1419,1082,2416,2155,2493,93,1231,2101,2483,1892,1837,197,2128,854,345,1178,1447,653,1598,1626,1587,1828,1145,1189,1654,1474,2168,1666,971,1041,583,1499,790,2208,1973,1444,2463,673,2167,2437,1961,1972,44,2158,918,1436,1917,905,719,1658,932,2286,1209,374,457,476,2452,627,1169,2330,2357,1376,1835,577,1136,308,2118,2284,749,784,150,1122,1243,315,2327,523,331,1404,2108,1362,129,498,1298,2351,1747,1792,643,1588,587,777,532,1634,1608,145,1188,1453,623,19,639,1700,214,10,1078,1191,2293,1003,1867,1621,595,2038,305,2438,1566,1045,662,1652,1557,2023,1989,86,1014,153,39,1531,603,567,160,1423,191,1347,223,821,814,963,1719,1981,2372,1602,94,1913,63,1275,1840,1836,881,1997,1495,128,2078,418,1008,1906,135,2213,1400,2482,48,848,339,820,156,1656,2154,46,62,303,2322,1034,1501,1900,459,860,957,399,2223,1689,946,1438,2007,324,1551,882,675,1603,1142,469,2015,737,421,2342,781,642,445,1273,829,509,1287,2290,225,1434,1524,1939,748,1026,592,1072,1256,2219,2267,1037,1261,1508,2460,318,218,1730,1153,147,1473,1342,1311,2162,417,1862,1852,1915,1954,2433,1365,340,1282,1344,1958,357,1268,1708,2491,1028,2465,524,1164,920,634,2488,1782,365,1250,1667,1968,2339,1481,2217,2091,343,1980,132,2220,1437,2170,1950,2048,2321,575,1326,2270,1850,1699,1703,2487,289,154,2387,81,563,1120,1569,1793,302,1987,1839,716,865,172,185,320,69,2063,2224,2274,2072,1991,707,2148,1435,2163,2392,1487,1144,1141,684,1131,2490,388,1511,670,314,2495,1763,482,1013,519,250,622,672,732,1433,1079,2143,1759,1949,2398,1774,2235,1635,31,1622,1686,972,2401,299,1482,1663,2367,1331,530,725,789,791,453,2273,1337,1355,1080,538,9,342,798,830,378,1097,1611,2453,2119,249,2346,1221,849,525,90,1157,626,1948,1577,1932,1196,123,1496,1505,838,1856,2071,2378,2234,1074,383,2172,774,401,1983,1421,366,822,112,368,2365,335,351,125,2486,953,1104,2354,1779,58,2139,475,1520,855,1408,1553,928,1232,550,817,2426,1858,1389,1378,636,201,2457,2308,555,327,1738,427,2356,415,479,1133,1821,208,1049,792,1071,1399,2268,2177,53,1200,2489,32,1873,765,1394,864,1218,921,1366,2182,1467,2145,288,2492,1866,1838,1442,2334,1210,1459,1851,1600,1697,2207,685,1712,414,460,1220,42,1036,1679,588,2374,638,1911,857,1031,2013,2345,909,1778,1316,1935,1809,990,1440,2070,2439,2496,840,385,239,2350,2414,506,1069,2212,1630,1655,1500,2296,1694,91,1642,2033,177,1126,253,803,1055,741,1740,1780,206,1786,933,1896,1824,738,364,1006,2027,531,1224,1240,103,914,2382,772,74,2375,2129,2297,1808,1471,2103,54,826,764,816,141,1877,2110,528,468,1245,72,2266,1333,947,995,2243,497,948,1538,853,1205,481,2445,2009,1390,350,1109,1381,2166,21,1382,2051,2044,1401,1957,2408,1369,1089,1542,71,644,161,1966,205,1040,704,1352,1254,1272,203,375,2344,2459,261,169,1960,149,847,916,2294,1128,174,2246,1725,184,362,1572,1338,1462,2228,105,13,535,1659,1058,602,1370,1685,2069,115,766,329,1875,2184,1775,127,2386,2248,952,621,405,596,1098,1414,740,1246,1259,1039,1513,1595,1238,1702,2053,446,1929,2340,1898,585,1879,999,1516,1318,2122,2196,64,134,1928,1534,7,2141,379,455,1323,1286,1820,1609,899,1324,1515,2307,2310,783,1170,88,1398,1890,987,2087,1300,615,1550,70,391,553,2451,1418,1206,1721,1341,1391,1302,1179,45,1993,1059,1623,1181,2221,714,657,721,285,1350,268,355,1826,2405,825,120,1687,2186,1056,1076,665,871,1483,2075,1150,2025,934,2022,965,1842,1396,1027,1936,428,1343,911,2215,1296,1864,968,1114,977,410,983,1299,240,333,1627,1237,1472,1443,2300,2136,1990,1425,2093,2016,2285,1429,711,1330,1573,2254,867,520,1050,1681,14,2130,1226,473,1308,2287,2120,989,257,113,2236,937,40,868,543,1933,260,30,584,2176,1223,1213,1757,1574,95,1204,1522,1194,589,2211,2432,2191,842,593,1812,451,578,922,2359,727,1439,87,529,1012,1263,461,1236,110,2028,1845,1113,1871,516,1751,1805,2081,2226,1943,1032,1647,546,747,2436,2406,1183,813,175,1005,1512,1882,296,2011,1665,1176,1217,1629,4,833,2413,1363,398,323,1024,744,2138,1267,1288,2171,2124,625,650,490,641,1753,423,1994,2090,77,901,556,2394,2003,470,227,107,1193,441,1222,1294,143,2229,907,810,1904,964,1199,2479,2152,1,2074,2086,2313,1693,2114,1099,38,1335,1770,2430,1940,1383,347,1849,2153,1339,970,735,2421,2206,661,1633,912,293,397,162,1313,1065,1177,294,1386,432,1801,605,155,356,1476,472,2185,770,2302,403,1087,1937,464,1430,2431,2315,1155,2140,193,1720,966,171,1995,165,1591,629,301,474,891,1493,1965,1077,743,158,1290,1661,226,973,489,2352,1848,1579,985,2251,1154,1156,753,12,2262,2049,1445,612,234,679,823,1942,1057,463,1672,332,1791,1860,406,646,616,1613,2180,2385,979,1806,1269,1468,894,1617,1322,467,1219,1244,687,2199,2200,1885,2043,2064,545,1011,1022,1580,873,761,35,728,2388,1017,608,243,1262,1710,771,1620,2059,131,927,1124,256,1888,768,1184,1292,2175,1974,1407,2,895,1095,60,245,2169,1470,730,637,1861,1772,557,2480,426,925,449,607,878,2232,1158,492,2314,2474,1822,1146,955,511,2109,797,452,2419,1925,839,148,136,1489,1094,1118,104,1650,337,793,1701,1922,1607,940,1532,1668,1085,1002,2204,1756,263,1374,326,1901,1760,827,960,2164,576,420,2096,521,219,1454,394,80,1019,2125,2035,1458,1207,1816,425,1618,1233,56,319,199,2084,17,486,192,198,176,2045,2360,2494,1872,2233,1818,751,1754,2292,443,1064,1129,1690,1698,2029,2231,1007,1769,919,2497,180,1528,488,434,1303,1978,2107,101,1367,2303,1869,1637,1844,194,1680,1688,233,1859,1216,483,2042,667,930,795,1086,2343,2174,1523,2331,390,3,866,1582,2205,1831,287,566,879,1671,1402,580,1795,2214,409,713,182,290,330,1998,354,780,1053,2411,1479,395,478,1819,1941,1610,496,2263,2420,2295,1351,796,1777,572,2390,444,230,1554,325,2193,762,429,518,537,1392,274,1464,2173,2473,491,1975,37,1140,2475,2319,2080,1571,2054,1265,36,2349,2083,2237,2427,1357,1395,1043,2478,2104,533,1422,1606,2061,1800,1161,712,1788,2361,2304,1645,1894,317,108,742,660,2417,229,1967,729,1413,20,2440,373,2137,1260,1916,422,1035,348,1639,703,1255,1349,2260,1105,600,586,1902,1979,262,458,805,541,2126,1475,2209,279,903,2276,609,2116,276,1953,1492,1230,695,138,275,1469,341,2230,633,1865,1691,1615,2102,2448,321,269,2159,508,606,1103,570,183,1160,28,1248,89,1291,1530,2252,809,1229,1375,887,1748,386,945,328,168,140,799,2047,1735,1510,1643,669,1101,2333,1810,759,818,2133,2238,686,111,1841,1411,1130,1605,1033,1336,1908,284,893,1125,1764,2485,628,1855,1514,1653,647,698,207,734,1897,1348,1198,2380,2335,1758,1787,1696,2241,50,2391,1393,1724,1052,2407,2146,1066,2250,1544,785,259,59,1722,1127,1484,1312,786,106,2098,1886,1739,1519,706,416,756,1494,121,1548,1527,349,137,144,1354,2277,2030,433,597,1969,2341,1952,1815,1093,25,648,1020,2216,1452,688,1745,224,1102,1578,2449,1234,1424,1498,1009,1923,2134,361,846,1506,2058,1242,447,1804,1214,2095,244,237,1567,456,2014,1662,1061,5,440,2160,2247,2225,2415,1526,924,951,6,775,579,801,371,2402,1486,166,700,400,709,1560,1135,450,1123,1783,283,360,1212,613,534,2377,79,2227,1857,2447,564,1405,2383,1415,298,1829,139,411,837,1208,278,2467,1038,559,1632,241,83,2088,2249,2400,1329,2034,99,68,652,1677,43,701,1728,1175,969,1962,978,549,503,2242,1565,843,850,2363,1798,2328,170,2348,2399,967,1152,1631,1387,1727,2099,1556,962,1117,1597,1016,1449,133,2353,2423,281,2106,157,996,1277,1371,683,336,1174,2428,2500,97,2021,2481,1951,1119,258,1446,1651,1384,2068,246,34,2456,1773,2202,2424,666,1023,33,1776,1562,2477,1944,897,1817,1315,484,1253,2373,2282,836,986,1585,935,1549,892,1073,2197,1171,1921,1060,82,1295,591,2032,195,49,2001,1899,1616,1063,1586,1186,1168,2019,1827,1044,1919,212,913,2379,1203,2462,544,782,2272,1674,671,173,1887,502,514,270,1046,2291,1594,1881,811,1356,540,2002,1711,1803,739,910,251,2056,163,1004,682,656,692,236,304,1249,807,1847,1202,1883,26,393,2024,1406,2476,1675,1090,1110,1971,265,1182,363,1192,1266,78,1784,412,380,1825,1715,1833,413,852,1283,65,358,2255,2370,2113,2244,2464,861,2362,618,1846,1766,1497,462,883,1116,526,961,1025,407,1258,2397,2278,763,2309,1733,1934,1147,548,2018,1307,998,2443,1670,2210,431,1180,976,1755,1996,376,252,1584,2037,1619,313,2144,1490,1491,1964,2261,51,334,22,1714,699,1854,2271,1225,1062,1986,2117,1416,571,282,736,1535,539,2368,1539,424,689,1641,242,1889,437,2461,617,41,402,381,1010,598,1100,863,2132,291,2305,620,1360,2240,495,1762,1441,408,2329,75,2121,1525,247,510,710,2337,2259,915,718,1297,2094,369,574,215,2469,1799,2455,1575,1289,465,988,1328,1970,2115,1705,2358,1732,2312,73,2466,1988,2288,1107,1015,1042,1884,1893,844,1051,1956,1521,1306,943,778,2245,808,2409,504,471,693,889,507,2332,1251,2004,929,2097,1279,442,430,1067,200,982,2317,2039,228,499,353,1926,681,370,2281,1403,2471,1353,1604,1227,512,2264,2147,1457,1796,984,2105,1752,547,517,494,316,2142,2076,2498,118,248,1264,2403,1165,2156,2279,898,307,1075,2052,1397,466,708,1736,896,1048,2194,599,2010,1907,991,359,179,938,204,1930,1843,1669,877,1426,2256,1537,906,1030,126,109,731,344,954,1084,1134,1723,2178,513,2381,1332,1628,760,1999,1874,387,551,931,1448,870,654,1149,18,11,1112,1581,142,831,631,189,536,959,1504,1317,2366,1235,2066,436,2161,267,1781,1636,221,678,1271,2157,902,1518,2195,1592,2458,1895,1502,2092,2085,27,1276,1547,2325,936,238,186,758,1047,2410,2253,1068,211,2376,702,1768,1319,1706,295,1644,900,1517,1029,754,209,1143,1765,2073,1021,1083,720,1558,1797,980,76,680,280,1638,372,2036,1540,438,2165,8,2289,1456,941,167,2450,1914,2468,501,888,29,1455,733,1590,2112,2079,117,1466,235,2396,1121,1734,1561,480,1583,880,272,382,2446,1878,604,1228,950,856,582,346,619,1834,2127,181,1673,1891,1309,277,1612,527,1976,1091,1359,997,231,1081,1555,755,1215,2484,884,254,1138,435,213,515,722,1750,2444,590,1137,61,271,2311,1813,1420,24,1903,1704,723,1463,130,2269,2336,2298,297,651,1334,787,1931,645,2326,1070,2089,1938,2203,2031,1707,2265,610,875,1955,562,874,804,1533,52,1529,1945,1649,222,1372,664,794,923,1947,2316,16,885,1480,2060,311,98,565,500,220,1992,1790,1814,1905,322,802,1293,1478,994,1599,1477,1427,1385,377,1794,694,1096,2050,477,1601,1559,1185,1977,886,1545,1657,47,1876,2057,2201,1870,66,1541,2275,2026,1726,594,1187,715,2347,2283,569,1241,819,1742,1257,1946,1546,255,1488,1984,1853,1660,1563,1880,1167,1912,1412,2181,1564,1507,1428,2395,1648,1373,1285,159,2040,949,2371,85,2404,1536,834,2301,1270,2020,2190,1640,448,1729,1320,1451,640,1676,2384,1789,210,114,1361,1576,1924,396,2192,800,832,367,2123,122,1570,217,188,1018,624,630,1346,1684,872,1646,601,1918,614,2218,2135,2239,2418,1132,1802,439,1278,151,2189,2000,1172,2005,1327,96,2183,1927,202,2422,904,1744,2441,1211,558,560,146,828,1830,454,485,2041,100,2187,389,869,862,1000,2008,944,981,2006,2435,286,2257,691,1717,1304,1305,273,705,1741,2318,2470,1151,2179,815,1868,306,1465,2389,2077,55,1568,581,1379,1111,1713,1197,1718,655,926,1340,338,611,57,674,552,1274,2324,542,1461,2055,1614,1910,2149,309,1284,1909,84,1625,310,2131,752,116,1139,1832,2338,1195,649,522,216,1450,561,1321,300,1761,851,757,676,769,1088,1593,2258,1239,1682,697,1982,1417,745,1920,404,746,1543,663,2472,779,2188,668,1823,845,974,908,392,2082,2280,2454,696,2429,419,2062,2151,67,677,876,1345,917,1108};

        int[] nums5 = new int[10000];
        int[][] board5 = new int[500][500];
        try {
            BufferedReader in = new BufferedReader(new FileReader("C:/java/bingo.txt"));

            for(int i = 0; i < board5.length; i++) {
                String s = in.readLine();
                StringTokenizer st = new StringTokenizer(s, " ");
                for(int j = 0; j < board5.length; j++) {
                    board5[i][j] = Integer.parseInt(st.nextToken());
                }
            }

            in.close();

            in = new BufferedReader(new FileReader("C:/java/nums.txt"));
            StringTokenizer st = new StringTokenizer(in.readLine());

            for(int i = 0; i < nums5.length; i++) {
                nums5[i] = Integer.parseInt(st.nextToken());
            }

            in.close();
        } catch (IOException e) {
            System.err.println(e);
            System.exit(1);
        }

        System.out.println(solution(board, nums));
        System.out.println(solution(board2, nums2));
        System.out.println(solution(board5, nums4));
        System.out.println(solution(board5, nums5));
    }

    // 500 * 500 bingo에 10000 nums로 0.016초 확인
    public static int solution(int[][] board, int[] nums) {
        long start = System.currentTimeMillis();
        int answer = 0, x, y, num, dCount1 = 0, dCount2 = 0;

        int size = board.length;
        int[] gCount = new int[size];
        int[] sCount = new int[size];

        HashMap<Integer, Integer> hm = new HashMap<>();

        for(int i = 0; i < size*size; i++) {
            hm.put(board[i/size][i%size], i);
        }

        for(int i = 0; i < nums.length; i++) {
            num = hm.get(nums[i]);
            x = num / size;
            y = num % size;
            gCount[x]++;
            sCount[y]++;
            if(x == y) {
                dCount1++;
            }
            if(size-1-x == y) {
                dCount2++;
            }
        }

        for(int i = 0; i < size; i++) {
            if (gCount[i] == size) {
                answer++;
            }
            if (sCount[i] == size) {
                answer++;
            }
        }
        if(dCount1 == size) {
            answer++;
        }
        if(dCount2 == size) {
            answer++;
        }

        long end = System.currentTimeMillis();
        System.out.println( "실행 시간 : " + ( end - start )/1000.0 );
        return answer;
    }
}